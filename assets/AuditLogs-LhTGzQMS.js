import{u as f,s as j,j as e}from"./index-Dd6yNnWg.js";import{r as t}from"./vendor-react-D1YLald2.js";import{S as c,m as b,n as N,C as w,D as n,X as v}from"./vendor-icons-BilFm2o-.js";import"./vendor-supabase-BZ0N5lZN.js";const A=()=>{const{profile:k}=f(),[d,m]=t.useState([]),[x,o]=t.useState(!0),[r,p]=t.useState(""),[a,h]=t.useState("all");t.useEffect(()=>{u()},[a]);const u=async()=>{try{let s=j.from("audit_logs").select(`
                    *,
                    profiles:actor_id (full_name, role)
                `).order("created_at",{ascending:!1});a!=="all"&&(s=s.eq("entity",a));const{data:g,error:i}=await s.limit(100);if(i)throw i;m(g||[])}catch(s){console.error("Error fetching logs:",s)}finally{o(!1)}},y=s=>s.includes("create")?"bg-emerald-50 text-emerald-700 border-emerald-100":s.includes("delete")||s.includes("deactivate")?"bg-red-50 text-red-700 border-red-100":s.includes("update")||s.includes("edit")?"bg-indigo-50 text-indigo-700 border-indigo-100":"bg-gray-50 text-gray-700 border-gray-100",l=d.filter(s=>s.action.toLowerCase().includes(r.toLowerCase())||s.entity.toLowerCase().includes(r.toLowerCase())||s.profiles?.full_name?.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 sm:gap-8 pb-6 border-b border-primary-100/50",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-10 sm:w-12 h-1 bg-primary-950 rounded-full shadow-[0_0_10px_rgba(0,0,0,0.1)]"}),e.jsx("p",{className:"text-[9px] sm:text-[10px] font-black text-primary-500 uppercase tracking-[0.4em]",children:"Mainframe Audit"})]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl font-black text-primary-950 tracking-tighter italic font-heading",children:["Security ",e.jsx("span",{className:"text-primary-600",children:"Protocol"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 bg-emerald-50 px-5 sm:px-6 py-3.5 sm:py-4 rounded-xl sm:rounded-2xl border border-emerald-100/50 w-full sm:w-auto justify-center",children:[e.jsx(c,{className:"w-5 h-5 text-emerald-600 animate-pulse"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-emerald-900 uppercase tracking-widest",children:"System Integrity: Nominal"})]})]}),e.jsxs("div",{className:"academic-card p-2 sm:p-4 flex flex-col md:flex-row gap-3 sm:gap-4 items-center bg-white shadow-2xl shadow-primary-950/5",children:[e.jsxs("div",{className:"relative flex-1 group w-full",children:[e.jsx(b,{className:"absolute left-5 sm:left-6 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-300 transition-colors group-focus-within:text-primary-600"}),e.jsx("input",{type:"text",placeholder:"Intercept records by action, entity ID or authorized actor...",className:"w-full pl-14 sm:pl-16 pr-6 sm:pr-8 py-4 sm:py-5 bg-transparent rounded-2xl focus:outline-none font-medium placeholder:text-gray-300 text-sm",value:r,onChange:s=>p(s.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 bg-primary-50 rounded-xl sm:rounded-2xl border border-primary-100/50 w-full sm:min-w-[260px]",children:[e.jsx(N,{className:"w-4 h-4 text-primary-600"}),e.jsxs("select",{className:"bg-transparent text-[10px] font-black text-primary-900 uppercase tracking-widest focus:outline-none flex-1 appearance-none cursor-pointer",value:a,onChange:s=>h(s.target.value),children:[e.jsx("option",{value:"all",children:"Global Matrix"}),e.jsx("option",{value:"students",children:"Student Ledger"}),e.jsx("option",{value:"courses",children:"Academic Catalog"}),e.jsx("option",{value:"student_courses",children:"Enrollment Node"}),e.jsx("option",{value:"profiles",children:"Identity Matrix"})]})]})]}),e.jsx("div",{className:"academic-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-primary-950 text-white uppercase tracking-[0.25em] text-[8px] sm:text-[9px] font-black whitespace-nowrap",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 sm:px-10 py-5 sm:py-7",children:"Access Timestamp"}),e.jsx("th",{className:"px-6 sm:px-10 py-5 sm:py-7",children:"Authorized Actor"}),e.jsx("th",{className:"px-6 sm:px-10 py-5 sm:py-7",children:"Action Protocol"}),e.jsx("th",{className:"px-6 sm:px-10 py-5 sm:py-7",children:"Entity Class"}),e.jsx("th",{className:"px-6 sm:px-10 py-5 sm:py-7 text-right",children:"Reference ID"})]})}),e.jsx("tbody",{className:"divide-y divide-primary-50",children:x?[1,2,3,4,5,6].map(s=>e.jsx("tr",{className:"animate-pulse",children:e.jsx("td",{colSpan:"5",className:"px-10 py-8 bg-gray-50/20"})},s)):l.length>0?l.map(s=>e.jsxs("tr",{className:"hover:bg-primary-50/20 transition-all group duration-500 whitespace-nowrap",children:[e.jsx("td",{className:"px-6 sm:px-10 py-6 sm:py-8",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-[11px] sm:text-xs font-bold text-gray-400 group-hover:text-primary-600 transition-colors",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg sm:rounded-xl bg-gray-50 flex items-center justify-center border border-gray-100 group-hover:bg-white group-hover:shadow-lg transition-all",children:e.jsx(w,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-primary-950 font-black",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-medium tracking-widest",children:new Date(s.created_at).toLocaleTimeString()})]})]})}),e.jsx("td",{className:"px-6 sm:px-10 py-6 sm:py-8",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-primary-600 to-indigo-800 flex items-center justify-center text-white text-[10px] sm:text-xs font-black shadow-lg shadow-primary-900/10 group-hover:rotate-6 transition-transform",children:s.profiles?.full_name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-black text-primary-950 uppercase tracking-tight",children:s.profiles?.full_name}),e.jsxs("p",{className:"text-[8px] sm:text-[9px] font-black text-primary-400 uppercase tracking-widest mt-0.5",children:[s.profiles?.role," AUTH"]})]})]})}),e.jsx("td",{className:"px-6 sm:px-10 py-6 sm:py-8",children:e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-[8px] sm:text-[9px] font-black uppercase tracking-[0.2em] border ${y(s.action)}`,children:[e.jsx("span",{className:`w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full ${s.action.includes("delete")?"bg-red-500 animate-pulse":s.action.includes("create")?"bg-emerald-500":"bg-indigo-500"}`}),s.action.replace("_"," ")]})}),e.jsx("td",{className:"px-6 sm:px-10 py-6 sm:py-8",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-[10px] sm:text-xs font-black text-primary-700 uppercase tracking-widest",children:[e.jsx(n,{className:"w-3.5 h-3.5 text-primary-300"}),s.entity.replace("_"," ")]})}),e.jsx("td",{className:"px-6 sm:px-10 py-6 sm:py-8 text-right",children:e.jsxs("code",{className:"text-[9px] sm:text-[10px] font-mono font-bold text-gray-400 bg-gray-50 px-2 sm:px-3 py-1 sm:py-1.5 rounded-md sm:rounded-lg border border-gray-100 group-hover:text-primary-600 group-hover:border-primary-100 transition-all",children:["#",s.entity_id?.substring(0,8),"..."]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-10 py-32 text-center",children:e.jsxs("div",{className:"max-w-xs mx-auto text-center",children:[e.jsx("div",{className:"bg-primary-50 w-24 h-24 rounded-3xl flex items-center justify-center mx-auto mb-6 border border-primary-100 shadow-inner",children:e.jsx(v,{className:"w-10 h-10 text-primary-200"})}),e.jsx("h3",{className:"text-primary-950 font-black text-xl mb-2 tracking-tight font-heading uppercase italic",children:"Zero Data Capture"}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"No encrypted protocol records match your current intercept parameters."})]})})})})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 pt-8 border-t border-primary-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"w-3.5 h-3.5 text-primary-400"}),e.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-[0.3em]",children:"End-to-End Encrypted Logs"})]}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-primary-100"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"w-3.5 h-3.5 text-primary-400"}),e.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-[0.3em]",children:"Immutable Cold Storage"})]})]})]})};export{A as default};
